<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate Dactyl Manuform</title>
    <link rel="stylesheet" href="normalize.css">
    <link rel="stylesheet" href="milligram.min.css">
    <script>
        function setkeyboard(ncols, nrows, minidox, innercolumn, lastrow, widepinky) {
            document.getElementById("ncols").value = ncols;
            document.getElementById("nrows").value = nrows;
            document.getElementById("minidox").value = minidox;
            document.getElementById("inner-column").value = innercolumn;
            document.getElementById("last-row").value = lastrow;
            document.getElementById("wide-pinky").value = widepinky;
        }

        function setminidox() {
            setkeyboard(5, 4, "true", "false", "zero", "false");
        }

        function setcorne() {
            setkeyboard(6, 4, "true", "false", "zero", "false");
        }

        function setergodox() {
            setkeyboard(6, 5, "false", "true", "full", "true");
        }

        function toggle_connectors_fields() {
            const use_external_holder = document.getElementById("external-holder").value;
            const impacted_ids = ["trrs-connector", "usb-hole"];
            if (use_external_holder === "true") {
                impacted_ids.forEach(id => {
                    document.querySelector("label[for='" + id + "']").style.display = 'none'; // Hide the label
                    document.querySelector("select[id='" + id + "']").style.display = 'none'; // Hide the select
                });
            } else {
                impacted_ids.forEach(id => {
                    document.querySelector("label[for='" + id + "']").style.display = 'block'; // Show the label
                    document.querySelector("select[id='" + id + "']").style.display = 'block'; // Hide the select
                });
            }
        }

        function toggle_wrist_rest_type_fields() {
            const use_wrist_rest = document.getElementById("wrist-rest").value;
            if (use_wrist_rest === "false") {
                document.querySelector("label[for='integrated-wrist-rest']").style.display = 'none'; // Hide the label
                document.querySelector("select[id='integrated-wrist-rest']").style.display = 'none'; // Hide the select
                document.querySelector("input[name='generate-wrist-rest']").style.display = 'none'; // Hide the input
            } else {
                document.querySelector("label[for='integrated-wrist-rest']").style.display = 'block'; // Show the label
                document.querySelector("select[id='integrated-wrist-rest']").style.display = 'block'; // Show the select
                toggle_generate_wrist_rest_button();
            }
        }

        function toggle_generate_wrist_rest_button() {
            const integrated_wrist_rest = document.getElementById("integrated-wrist-rest").value;
            if (integrated_wrist_rest === "true") {
                document.querySelector("input[name='generate-wrist-rest']").style.display = 'none'; // Hide the button
            } else {
                document.querySelector("input[name='generate-wrist-rest']").style.display = 'block'; // Show the button
            }
        }
    </script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="column column-50 column-offset-25">
                <h1>Dactyl Manuform Generator</h1>
            </div>
        </div>
        <div class="row">
            <div class="column column-25">
                <h2>Defaults:</h2>
                <button onclick="setminidox()">Minidox</button>
                <br>
                <button onclick="setcorne()">Corne</button>
                <br>
                <button onclick="setergodox()">Ergodox</button>
            </div>
            <div class="column column-50">
                <form method="POST" action="/manuform">
                    <label for="keys">
                        <h3>Keys</h3>
                    </label>
                    <fieldset name="keys" id="keys">
                        <label for="ncols">Number of columns (4 - 7)</label>
                        <input type="number" name="ncols" id="ncols" value=5 min="4" max="7">
                        <label for="nrows">Number of rows (3 - 6)</label>
                        <input type="number" name="nrows" id="nrows" value=4 min="3" max="6">
                        <label for="minidox">Thumb Key Count</label>
                        <select id="minidox" name="minidox">
                            <option value="false">6</option>
                            <option value="true">3</option>
                        </select>
                        <label for="last-row">Last Row Key Counts?</label>
                        <select id="last-row" name="last-row">
                            <option value="two">Two (Default Dactyl Manuform).</option>
                            <option value="zero">No last row.</option>
                            <option value="full">Use all keys.</option>
                        </select>
                        <label for="switch-type">Key Hole</label>
                        <select id="switch-type" name="switch-type">
                            <option value="box">Box and MX</option>
                            <option value="mx">MX</option>
                            <option value="alps">Alps</option>
                        </select>
                        <label for="inner-column">Inner Column?</label>
                        <select id="inner-column" name="inner-column">
                            <option value="false">No</option>
                            <option value="true">Yes</option>
                        </select>
                    </fieldset>
                    <label for="curvature">
                        <h3>Curvature & Tenting</h3>
                    </label>
                    <fieldset name="curvature" id=curvature>
                        <label for="alpha">Column's Curvature</label>
                        <select id="alpha" name="alpha">
                            {% for cc in column-curvature %}
                            <option value={{cc}}>pi/{{cc}}</option>
                            {% endfor %}
                        </select>
                        <label for="beta">Row's Curvature</label>
                        <select id="beta" name="beta">
                            <option value=36>pi/36</option>
                            <option value=30>pi/30</option>
                        </select>
                        <label for="centecol">Center of the curvature for the column</label>
                        <select id="centercol" name="centercol">
                            <option value=4>Pinky finger's column</option>
                            <option value=3>Ring finger's column</option>
                            <option value=2>Middle finger's column</option>
                            <option value=1>Index finger's column.</option>
                        </select>
                        <label for="tenting-angle">Tenting Angle</label>
                        <select id="tenting-angle" name="tenting-angle">
                            {% for ta in tenting-angle %}
                            <option value={{ta}}>pi/{{ta}}</option>
                            {% endfor %}
                        </select>
                    </fieldset>
                    <label for="connector">
                        <h3>Connectors</h3>
                    </label>
                    <fieldset name="connector" id="connector">
                        <label for="external-holder">Use loligagger's external holder ?</label>
                        <select id="external-holder" name="external-holder" onchange="toggle_connectors_fields()">
                            <option value="false">No</option>
                            <option value="true">Yes</option>
                        </select>
                        <label for="trrs-connector">Connector</label>
                        <select id="trrs-connector" name="trrs-connector">
                            <option value="false">RJ9</option>
                            <option value="true">TRRS</option>
                        </select>
                        <label for="usb-hole">USB Hole</label>
                        <select id="usb-hole" name="usb-hole">
                            <option value="false">Mini</option>
                            <option value="true">Micro</option>
                        </select>
                    </fieldset>
                    <label for="case-form">
                        <h3>Form of the Case</h3>
                    </label>
                    <fieldset name="case-form" id="case-form">
                        <label for="hotswap">Dongguan Kaihua Electronics Co., Ltd
                            (originally named Longhua Electronics)'s Hotswap Socket?</label>
                        <select id="hotswap" name="hotswap">
                            <option value="false">No</option>
                            <option value="true">Yes</option>
                        </select>
                        <label for="ortho">Stagger?</label>
                        <select id="ortho" name="ortho">
                            <option value="false">Yes</option>
                            <option value="true">No</option>
                        </select>
                        <label for="wide-pinky">Wide Pinky?</label>
                        <select id="wide-pinky" name="wide-pinky">
                            <option value="false">No</option>
                            <option value="true">Yes</option>
                        </select>
                        <label for="keyboard-z-offset">Height Offset</label>
                        <select id="keyboard-z-offset" name="keyboard-z-offset">
                            {% for ho in height-offset %}
                            <option value={{ho}}>{{ho}}mm</option>
                            {% endfor %}
                        </select>
                        <label for="wire-post">Wire Posts?</label>
                        <select id="wire-post" name="wire-post">
                            <option value="false">No</option>
                            <option value="true">Yes</option>
                        </select>
                        <label for="screw-inserts">Screw inserts</label>
                        <select id="screw-inserts" name="screw-inserts">
                            <option value="false">No screw inserts</option>
                            <option value="true">Screw inserts</option>
                        </select>
                    </fieldset>
                    <label for="miscelania">
                        <h3>Miscelania</h3>
                    </label>
                    <fieldset name="miscelania" id="miscelania">
                        <label for="show-keycaps">Show Keycaps?</label>
                        <select id="show-keycaps" name="show-keycaps">
                            <option value="false">No</option>
                            <option value="true">Yes</option>
                        </select>
                        <label for="wrist-rest">Wrist Rest?</label>
                        <select id="wrist-rest" name="wrist-rest" onchange="toggle_wrist_rest_type_fields()">
                            <option value="true">Yes</option>
                            <option value="false">No</option>
                        </select>
                        <label for="integrated-wrist-rest">Integrated Wrist Rest?</label>
                        <select id="integrated-wrist-rest" name="integrated-wrist-rest" onchange="toggle_generate_wrist_rest_button()">
                            <option value="false">No</option>
                            <option value="true">Yes</option>
                        </select>
                        <label for="right-side">Right side or left side?</label>
                        <select id="right-side" name="right-side">
                            <option value="true">Right</option>
                            <option value="false">Left</option>
                        </select>
                    </fieldset>
                    <input class="button-primary" type="submit" name="generate-case" value="Generate Case">
                    <input class="button-primary" type="submit" name="generate-plate" value="Generate Plate">
                    <input class="button-primary" type="submit" name="generate-wrist-rest" value="Generate wrist rest">
                </form>
                <p>Loligagger's external holder files:</p>
                <ul>
                    <li><a href="loligagger-external-holder-promicro-v1.stl">Promicro V1</a></li>
                    <li><a href="loligagger-external-holder-promicro-v2.stl">Promicro V2</a></li>
                    <li><a href="loligagger-external-holder-elite-c-v1.stl">Elite-C V1</a></li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="column column-50 column-offset-25">
                <p>
                    Written by <a href="https://github.com/ibnuda">Ibnu D. Aji</a>.
                    Provided as is by <a href="https://dactyl.bigcartel.com">Cheap Dactyl</a>.
                    Licenced under the<a href="https://github.com/ibnuda/dactyl-keyboard/tree/refaktor#license"
                        rel="noopener" target="_blank" title="GNU Affero General Public License Version 3"> GNU
                        Affero General Public License V3</a>.
                </p>
            </div>
        </div>
    </div>
</body>

</html>